<!DOCTPYE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>Local Save Trial</title>
		<style>
		
		table {
		  border-collapse: separate;
		  width: 100%;
		  border: 0px solid white;
		  border-spacing: 10px;
		}
		
		td {
			border: 0px solid white;
		}

		.block {
		  display: block;
		  width: 100%;
		  border: 10px;
		  background-color: ##EFEFEF;
		  color: black;
		  padding: 14px 28px;
		  font-size: 16px;
		  cursor: pointer;
		  text-align: center;
		  border-radius: 8px;
		}

		.button {		
		  width: 100%;		 
		  text-align: center;
		}

		.block:hover {
		  background-color: #ddd;
		  color: black;
		}
	</style>

	</head>

<body>
	<div id="seatDiv">
		<table id="seatTable" border="2"> 
			<tr>
				<td><input id="Seat1" type="button" value="Seat 1A" onclick="seatAction(this.value);" class="block"/></td>
				<td><input id="Seat2" type="button" value="Seat 1B" onclick="seatAction(this.value);" class="block"/></td>
				<td><input id="Seat3" type="button" value="Seat 1C" onclick="seatAction(this.value);" class="block"/></td>
				<td>&emsp; &emsp; &emsp;</td>
				<td><input id="Seat4" type="button" value="Seat 1D" onclick="seatAction(this.value);" class="block"/></td>
				<td><input id="Seat5" type="button" value="Seat 1E" onclick="seatAction(this.value);" class="block"/></td>
				<td><input id="Seat6" type="button" value="Seat 1F" onclick="seatAction(this.value);" class="block"/></td>							
			</tr>
			<tr>
				<td><input id="Seat7" type="button" value="Seat 2A" onclick="seatAction(this.value);" class="block"/></td>
				<td><input id="Seat8" type="button" value="Seat 2B" onclick="seatAction(this.value);" class="block"/></td>
				<td><input id="Seat9" type="button" value="Seat 2C" onclick="seatAction(this.value);" class="block"/></td>
				<td>&emsp; &emsp; &emsp;</td>
				<td><input id="Seat10" type="button" value="Seat 2D" onclick="seatAction(this.value);" class="block"/></td>
				<td><input id="Seat11" type="button" value="Seat 2E" onclick="seatAction(this.value);" class="block"/></td>
				<td><input id="Seat12" type="button" value="Seat 2F" onclick="seatAction(this.value);" class="block"/></td>
			</tr>
		</table>
		<br><br>
	</div>
	
	<div id="catDiv">
		<table id="catTable" border="2">
			<td>
			<!-- Update if-blocks below if changing category names!! -->
				<tr><td colspan="2"><input id="CatA" type="button" value="CategoryA" onclick="catAction(this.value);" class="block"/></td></tr>
				<tr><td colspan="2"><input id="CatB" type="button" value="CategoryB" onclick="catAction(this.value);" class="block"/></td></tr>
				<tr><td colspan="2"><input id="CatC" type="button" value="CategoryC" onclick="catAction(this.value);" class="block"/></td></tr>
				<tr>&emsp;</tr>
				<tr><td width="99%"><input id="CommentText" type="text" style="width:100%"></td><td style="white-space: nowrap;"><input id="CommentButton" type="button" value="Comment" onclick="submitComment(CommentText.value);" style.float="right"/><td></tr>

				
			</td>
		</table>
		<br><br>
	</div>
	
	<div id="eventDivA">
		<table id="eventTableA">
			<td>
				<tr><td><input id="Ev1" type="button" value="Event A1" onclick="eventAction(this.value);" class="block"/></td></tr>
				<tr><td><input id="Ev2" type="button" value="Event A2" onclick="eventAction(this.value);" class="block"/></td></tr>
				<tr><td><input id="Ev3" type="button" value="Event A3" onclick="eventAction(this.value);" class="block"/></td></tr>
				<tr><td><input id="Ev4" type="button" value="Event A4" onclick="eventAction(this.value);" class="block"/></td></tr>
				<tr><td><input id="Ev5" type="button" value="Event A5" onclick="eventAction(this.value);" class="block"/></td></tr>
				
				
			</td>
		</table>
	</div>
	
	<div id="eventDivB">
		<table id="eventTableB">
			<td>
				<tr><td><input id="Ev1" type="button" value="Event B1" onclick="eventAction(this.value);" class="block"/></td></tr>
				<tr><td><input id="Ev2" type="button" value="Event B2" onclick="eventAction(this.value);" class="block"/></td></tr>
				<tr><td><input id="Ev3" type="button" value="Event B3" onclick="eventAction(this.value);" class="block"/></td></tr>
				<tr><td><input id="Ev4" type="button" value="Event B4" onclick="eventAction(this.value);" class="block"/></td></tr>
				<tr><td><input id="Ev5" type="button" value="Event B5" onclick="eventAction(this.value);" class="block"/></td></tr>
				
				
			</td>
		</table>
	</div>
	<div id="eventDivC">
		<table id="eventTableC">
			<td>
				<tr><td><input id="Ev1" type="button" value="Event C1" onclick="eventAction(this.value);" class="block"/></td></tr>
				<tr><td><input id="Ev2" type="button" value="Event C2" onclick="eventAction(this.value);" class="block"/></td></tr>
				<tr><td><input id="Ev3" type="button" value="Event C3" onclick="eventAction(this.value);" class="block"/></td></tr>
				<tr><td><input id="Ev4" type="button" value="Event C4" onclick="eventAction(this.value);" class="block"/></td></tr>
				<tr><td><input id="Ev5" type="button" value="Event C5" onclick="eventAction(this.value);" class="block"/></td></tr>
				
				
			</td>
		</table>
	</div>
	<table id="downloadLink" border="1" >
		<tr>
			<td>
				<br>
				<center><a id="a1" download="Test.txt"> Download it! </a></center>
			</td>
		</tr>	
	</table>
	<p id="demo"></p>
			
	<script>

		
		
		var dataOut="";
		var lineTime;
		var lineSeat;
		var lineCat;
		var lineEvent;
		
	
		
		window.onload = function(){  
			seatDiv.style.display = "block";
			catDiv.style.display = "none";
			eventDivA.style.display = "none";
			eventDivB.style.display = "none";
			eventDivC.style.display = "none";
			
			var today = new Date();
			var date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
			var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
			
			dataOut=dataOut + date + "," + time + "," + ","+ "," + "," +"~New Session Start\n";
		}
		
		function seatAction(buttonClicked) {
		
		var today = new Date();
		var date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
		var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
		
		
		lineDate = ""
		lineTime= "";
		lineSeat= ""
		lineCat= ""
		lineEvent= ""
		
		lineDate=date;
		lineTime=time;		
		lineSeat=buttonClicked;
		console.log("Registed Seat Click: " +lineSeat + "@" + lineTime);
		
		seatDiv.style.display = "none";
		catDiv.style.display = "block";
		eventDivA.style.display = "none";
		eventDivB.style.display = "none";
		eventDivC.style.display = "none";
		}
		
		function catAction(buttonClicked) {
		
		
		lineCat=buttonClicked
		console.log("Category Selected: " +lineSeat + "@" + lineTime + "-" + lineCat);
		
		seatDiv.style.display = "none";
		catDiv.style.display = "none";
		if (buttonClicked=="CategoryA") {
			eventDivA.style.display = "block";
		} else if (buttonClicked=="CategoryB") {
			eventDivB.style.display = "block";
		} else if (buttonClicked=="CategoryB") {
			eventDivC.style.display = "block";
		}
		}
		
		function eventAction(buttonClicked) {
		
		lineEvent=buttonClicked
		console.log("Category Selected: " +lineSeat + " @ " + lineTime + " - " + lineCat + " -> " + lineEvent)
		
		dataOut=dataOut + lineDate + "," + lineTime + "," + lineSeat + "," + lineCat + "," + lineEvent + "," + "\n"
		
		console.log("dataOut : \n" +dataOut)
		blob1=new Blob([ dataOut ], {type: " text/plain" })
		a1.href = URL.createObjectURL(blob1)
		
		seatDiv.style.display = "block";
		catDiv.style.display = "none";
		eventDivA.style.display = "none";
		eventDivB.style.display = "none";
		eventDivC.style.display = "none";
		
		a1.download="Test_"+lineDate+"_"+lineTime+".txt"
		
		}
		
		function submitComment(comText) {

		comText=comText.replace(/,/gi,"|")
		dataOut=dataOut + lineDate + "," + lineTime + "," + lineSeat + ","+ "," + "," +comText + "\n";
		
		console.log("dataOut : \n" +dataOut);
		blob1=new Blob([ dataOut ], {type: " text/plain" });
		a1.href = URL.createObjectURL(blob1);
		
		CommentText.value="";
		
		seatDiv.style.display = "block";
		catDiv.style.display = "none";
		eventDivA.style.display = "none";
		eventDivB.style.display = "none";
		eventDivC.style.display = "none";
		a1.download="Test_"+lineDate+"_"+lineTime+".txt"
		}
		
		const a1 = document.getElementById("a1")
		var blob1 = new Blob([], {type: " text/plain" })
		a1.href = URL.createObjectURL(blob1)
	</script>
</body>

</html>
		
	
